(function(a3){var ai=a3.document,W=a3.console,h=a3.SVGElement||a6,bc=a3.SVGSVGElement||a6,aT=a3.SVGElementInstance||a6,w=a3.HTMLElement||a3.Element,P=false,af=a3.GestureEvent||a3.MSGestureEvent,aM=a3.Gesture||a3.MSGesture,ab=Math.hypot||function(bj,bk){return Math.sqrt(bj*bj+bk*bk)},aP={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},aK={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},aR={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0},az={pageX:0,pageY:0,clientX:0,clientY:0,timeStamp:0,pageSpeed:0,clientSpeed:0},ar=P?[]:null,E=P?[]:null,Z=0,d=null,ap=null,bi=0,a9=null,aJ={},N={active:false,target:null,targetElement:null,startEvent:null,pointerUp:{},xe:0,ye:0,duration:0,t0:0,vx0:0,vys:0,lambda_v0:0,one_ve_v0:0,i:null},i={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},bd=[],C=[],a7=[],I={},aD=[],u=[],ba={},m=null,au=null,aH=null,aN=null,a4=null,t=null,aF={draggable:false,dropzone:false,accept:null,resizable:false,squareResize:false,gesturable:false,styleCursor:true,snap:{mode:"grid",endOnly:false,actions:["drag"],range:Infinity,grid:{x:100,y:100},gridOffset:{x:0,y:0},anchors:[],paths:[],arrayTypes:/^anchors$|^paths$|^actions$/,objectTypes:/^grid$|^gridOffset$/,stringTypes:/^mode$/,numberTypes:/^range$/,boolTypes:/^endOnly$/},snapEnabled:false,restrict:{drag:null,resize:null,gesture:null,endOnly:false},restrictEnabled:true,autoScroll:{container:a3,margin:60,speed:300,numberTypes:/^margin$|^speed$/},autoScrollEnabled:false,inertia:{resistance:10,minSpeed:100,endSpeed:10,actions:["drag","resize"],zeroResumeDelta:false,numberTypes:/^resistance$|^minSpeed$|^endSpeed$/,arrayTypes:/^actions$/,boolTypes:/^zeroResumeDelta$/},inertiaEnabled:false,origin:{x:0,y:0},deltaSource:"page"},a={locked:false,x:0,y:0,dx:0,dy:0,realX:0,realY:0,anchors:[],paths:[]},O={dx:0,dy:0,snap:a,restricted:false},y={target:null,i:null,x:0,y:0,scroll:function(){var bl=y.target.options.autoScroll,bj=bl.container,bk=new Date().getTime(),bn=(bk-y.prevTime)/1000,bm=bl.speed*bn;if(bm>=1){if(bj instanceof a3.Window){bj.scrollBy(y.x*bm,y.y*bm)}else{if(bj){bj.scrollLeft+=y.x*bm;bj.scrollTop+=y.y*bm}}y.prevTime=bk}if(y.isScrolling){ah(y.i);y.i=U(y.scroll)}},edgeMove:function(bn){if(au&&au.options.autoScrollEnabled&&(f||a0)){var bp,bl,bj,bo,bk=au.options.autoScroll;if(bk.container instanceof a3.Window){bo=bn.clientX<y.margin;bp=bn.clientY<y.margin;bl=bn.clientX>bk.container.innerWidth-y.margin;bj=bn.clientY>bk.container.innerHeight-y.margin}else{var bm=S(bk.container);bo=bn.clientX<bm.left+y.margin;bp=bn.clientY<bm.top+y.margin;bl=bn.clientX>bm.right-y.margin;bj=bn.clientY>bm.bottom-y.margin}y.x=(bl?1:bo?-1:0);y.y=(bj?1:bp?-1:0);if(!y.isScrolling){y.margin=bk.margin;y.speed=bk.speed;y.start(au)}}},isScrolling:false,prevTime:0,start:function(bj){y.isScrolling=true;ah(y.i);y.target=bj;y.prevTime=new Date().getTime();y.i=U(y.scroll)},stop:function(){y.isScrolling=false;ah(y.i)}},M="createTouch" in ai,aX=M?20:10,aW=false,bg=false,B=false,f=false,A=false,a0=false,ao="xy",g={drag:{cursor:"move",moveListener:a8},resizex:{cursor:"e-resize",moveListener:ad},resizey:{cursor:"s-resize",moveListener:ad},resizexy:{cursor:"se-resize",moveListener:ad},gesture:{cursor:"",moveListener:aZ}},aO={drag:true,resize:true,gesture:true},ax=null,p="onmousewheel" in ai?"mousewheel":"wheel",s=["dragstart","dragmove","draginertiastart","dragend","dragenter","dragleave","drop","resizestart","resizemove","resizeinertiastart","resizeend","gesturestart","gesturemove","gestureinertiastart","gestureend","tap","doubletap"],z={},R={directBind:0,onevent:1,globalBind:2},be=navigator.appName=="Opera"&&M&&navigator.userAgent.match("Presto"),V="matchesSelector" in Element.prototype?"matchesSelector":"webkitMatchesSelector" in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector" in Element.prototype?"mozMatchesSelector":"oMatchesSelector" in Element.prototype?"oMatchesSelector":"msMatchesSelector",e,U=a3.requestAnimationFrame,ah=a3.cancelAnimationFrame,l={_element:a3,events:{}},aA={_element:ai,events:{}},av={_element:a3.parent,events:{}},aI={_element:null,events:{}},H=(function(){var br=a3.Event,bq="attachEvent" in a3&&!("addEventListener" in a3),bl=!bq?"addEventListener":"attachEvent",bp=!bq?"removeEventListener":"detachEvent",bo=bq?"on":"",bj=[],bn=[],bk=[];if(!("indexOf" in Array.prototype)){Array.prototype.indexOf=function(bu){var bt=this.length>>>0;var bv=Number(arguments[1])||0;bv=(bv<0)?Math.ceil(bv):Math.floor(bv);if(bv<0){bv+=bt}for(;bv<bt;bv++){if(bv in this&&this[bv]===bu){return bv}}return -1}}if(!("stopPropagation" in br.prototype)){br.prototype.stopPropagation=function(){this.cancelBubble=true};br.prototype.stopImmediatePropagation=function(){this.cancelBubble=true;this.immediatePropagationStopped=true}}if(!("preventDefault" in br.prototype)){br.prototype.preventDefault=function(){this.returnValue=false}}if(!("hasOwnProperty" in br.prototype)){br.prototype.hasOwnProperty=Object.prototype.hasOwnProperty}function bs(bx,bB,bu,bt){var bv=bj.indexOf(bx),by=bn[bv];if(!by){by={events:{},typeCount:0};bv=bj.push(bx)-1;bn.push(by);bk.push((bq?{supplied:[],wrapped:[],useCount:[]}:null))}if(!by.events[bB]){by.events[bB]=[];by.typeCount++}if(by.events[bB].indexOf(bu)===-1){var bz;if(bq){var bC=bk[bv],bw=bC.supplied.indexOf(bu);var bA=bC.wrapped[bw]||function(bD){if(!bD.immediatePropagationStopped){bD.target=bD.srcElement;bD.currentTarget=bx;if(/mouse|click/.test(bD.type)){bD.pageX=bD.clientX+ai.documentElement.scrollLeft;bD.pageY=bD.clientY+ai.documentElement.scrollTop}bu(bD)}};bz=bx[bl](bo+bB,bA,Boolean(bt));if(bw===-1){bC.supplied.push(bu);bC.wrapped.push(bA);bC.useCount.push(1)}else{bC.useCount[bw]++}}else{bz=bx[bl](bB,bu,bt||false)}by.events[bB].push(bu);return bz}}function bm(bx,bC,bu,bt){var by,bv=bj.indexOf(bx),bA=bn[bv],bD,bw,bB=bu;if(!bA||!bA.events){return}if(bq){bD=bk[bv];bw=bD.supplied.indexOf(bu);bB=bD.wrapped[bw]}if(bC==="all"){for(bC in bA.events){if(bA.events.hasOwnProperty(bC)){bm(bx,bC,"all")}}return}if(bA.events[bC]){var bz=bA.events[bC].length;if(bu==="all"){for(by=0;by<bz;by++){bm(bx,bC,bA.events[bC][by],Boolean(bt))}}else{for(by=0;by<bz;by++){if(bA.events[bC][by]===bu){bx[bp](bo+bC,bB,bt||false);bA.events[bC].splice(by,1);if(bq&&bD){bD.useCount[bw]--;if(bD.useCount[bw]===0){bD.supplied.splice(bw,1);bD.wrapped.splice(bw,1);bD.useCount.splice(bw,1)}}break}}}if(bA.events[bC]&&bA.events[bC].length===0){bA.events[bC]=null;bA.typeCount--}}if(!bA.typeCount){bn.splice(bv);bj.splice(bv);bk.splice(bv)}}return{add:function(bw,bu,bv,bt){bs(bw._element,bu,bv,bt)},remove:function(bw,bu,bv,bt){bm(bw._element,bu,bv,bt)},addToElement:bs,removeFromElement:bm,useAttachEvent:bq}}());function a6(){}function aB(bj){return !!bj&&(typeof Element==="object"?bj instanceof Element:bj&&typeof bj==="object"&&bj!==null&&bj.nodeType===1&&typeof bj.nodeName==="string")}function aY(bj,bk){aE(bk,aJ);bj.pageX=aJ.x;bj.pageY=aJ.y;F(bk,aJ);bj.clientX=aJ.x;bj.clientY=aJ.y;bj.timeStamp=new Date().getTime()}function D(bj,bl,bm){bj.pageX=bm.pageX-bl.pageX;bj.pageY=bm.pageY-bl.pageY;bj.clientX=bm.clientX-bl.clientX;bj.clientY=bm.clientY-bl.clientY;bj.timeStamp=new Date().getTime()-bl.timeStamp;var bk=Math.max(bj.timeStamp/1000,0.001);bj.pageSpeed=ab(bj.pageX,bj.pageY)/bk;bj.pageVX=bj.pageX/bk;bj.pageVY=bj.pageY/bk;bj.clientSpeed=ab(bj.clientX,bj.pageY)/bk;bj.clientVX=bj.clientX/bk;bj.clientVY=bj.clientY/bk}function aU(bk,bl,bm){var bo,bj,bn;bm=bm||{};bk=bk||"page";if(/touch/.test(bl.type)&&bl.touches){bo=(bl.touches.length)?bl.touches[0]:bl.changedTouches[0];bj=bo[bk+"X"];bn=bo[bk+"Y"]}else{bj=bl[bk+"X"];bn=bl[bk+"Y"]}bm.x=bj;bm.y=bn;return bm}function aE(bj,bk){bk=bk||{};if(bj instanceof L){if(/inertiastart/.test(bj.type)){aE(N.pointerUp,bk);bk.x+=N.sx;bk.y+=N.sy}else{bk.x=bj.pageX;bk.y=bj.pageY}}else{if(be){aU("screen",bj,bk);bk.x+=a3.scrollX;bk.y+=a3.scrollY}else{if(/gesture|inertia/i.test(bj.type)){aU("client",bj,bk);bk.x+=ai.documentElement.scrollLeft;bk.y+=ai.documentElement.scrollTop}else{aU("page",bj,bk)}}}return bk}function F(bk,bj){bj=bj||{};if(bk instanceof L){if(/inertiastart/.test(bk.type)){F(N.pointerUp,bj);bj.x+=N.sx;bj.y+=N.sy}else{bj.x=bk.clientX;bj.y=bk.clientY}}else{aU(be?"screen":"client",bk,bj)}return bj}function k(){return{x:a3.scrollX||ai.documentElement.scrollLeft,y:a3.scrollY||ai.documentElement.scrollTop}}function S(bk){var bj=/ipad|iphone|ipod/i.test(navigator.userAgent)?{x:0,y:0}:k(),bl=(bk instanceof h)?bk.getBoundingClientRect():bk.getClientRects()[0];return bl&&{left:bl.left+bj.x,right:bl.right+bj.x,top:bl.top+bj.y,bottom:bl.bottom+bj.y,width:bl.width||bl.right-bl.left,height:bl.heigh||bl.bottom-bl.top}}function T(bj){var bk=[];if(bj instanceof Array){bk[0]=bj[0];bk[1]=bj[1]}else{if(P){bk[0]=E[0];bk[1]=E[1]}else{bk[0]=bj.touches[0];if(bj.type==="touchend"&&bj.touches.length===1){bk[1]=bj.changedTouches[0]}else{bk[1]=bj.touches[1]}}}return bk}function a5(bj){var bk=T(bj);return{pageX:(bk[0].pageX+bk[1].pageX)/2,pageY:(bk[0].pageY+bk[1].pageY)/2,clientX:(bk[0].clientX+bk[1].clientX)/2,clientY:(bk[0].clientY+bk[1].clientY)/2,}}function n(bk){if(!(bk.touches&&bk.touches.length)&&!(P&&E.length)){return}var bn=T(bk),bj=Math.min(bn[0].pageX,bn[1].pageX),bo=Math.min(bn[0].pageY,bn[1].pageY),bm=Math.max(bn[0].pageX,bn[1].pageX),bl=Math.max(bn[0].pageY,bn[1].pageY);return{x:bj,y:bo,left:bj,top:bo,width:bm-bj,height:bl-bo}}function Y(bm){var bl=(au&&au.options||aF).deltaSource,bp=bl+"X",bn=bl+"Y",bo=T(bm);var bk=bo[0][bp]-bo[1][bp],bj=bo[0][bn]-bo[1][bn];return ab(bk,bj)}function aV(bl,bj){var bk=(au&&au.options||aF).deltaSource,bn=bk+"X",bm=bk+"Y",br=T(bl),bt=br[0][bn]-br[1][bn],bs=br[0][bm]-br[1][bm],bq=180*Math.atan(bs/bt)/Math.PI;if(typeof bj==="number"){var bp=bq-bj,bo=bp%360;if(bo>315){bq-=360+(bq/360)|0*360}else{if(bo>135){bq-=180+(bq/360)|0*360}else{if(bo<-315){bq+=360+(bq/360)|0*360}else{if(bo<-135){bq+=180+(bq/360)|0*360}}}}}return bq}function am(bl,bk){bl=bl||au;var bj=bl?bl.options.origin:aF.origin;bk=bk||bl._element;if(bj==="parent"){bj=bk.parentNode}else{if(bj==="self"){bj=bk}}if(aB(bj)){bj=S(bj);bj.x=bj.left;bj.y=bj.top}else{if(typeof bj==="function"){bj=bj(bl&&bk)}}return bj}function ak(bl){for(var bk=0,bj=bl.length;bk<bj;bk++){bl[bk].rect=bl[bk].getRect()}}function al(){var bl=N.target.options.inertia,bj=bl.resistance,bm=new Date().getTime()/1000-N.t0;if(bm<N.te){var bk=1-(Math.exp(-bj*bm)-N.lambda_v0)/N.one_ve_v0;if(N.modifiedXe===N.xe&&N.modifiedYe===N.ye){N.sx=N.xe*bk;N.sy=N.ye*bk}else{var bn=a2(0,0,N.xe,N.ye,N.modifiedXe,N.modifiedYe,bk);N.sx=bn.x;N.sy=bn.y}a1(N.startEvent);N.i=U(al)}else{N.sx=N.modifiedXe;N.sy=N.modifiedYe;N.active=false;a1(N.startEvent);at(N.startEvent)}}function j(bk,bn,bm,bl){var bj=1-bk;return bj*bj*bn+2*bj*bk*bm+bk*bk*bl}function a2(bl,bk,bn,bm,bp,bo,bj){return{x:j(bj,bl,bn,bp),y:j(bj,bk,bm,bo)}}function bf(bj){if(bj.length){var bq,bs=bj[0],br,bm=[],bp=[],bk,bn,bl;for(bn=1;bn<bj.length;bn++){bq=bj[bn];if(!bm.length){br=bs;while(br.parentNode!==ai){bm.unshift(br);br=br.parentNode}}if(bs instanceof w&&bq instanceof h&&!(bq instanceof bc)){if(bq===bs.parentNode){continue}br=bq.ownerSVGElement}else{br=bq}bp=[];while(br.parentNode!==ai){bp.unshift(br);br=br.parentNode}bl=0;while(bp[bl]&&bp[bl]===bm[bl]){bl++}var bo=[bp[bl-1],bp[bl],bm[bl]];bk=bo[0].lastChild;while(bk){if(bk===bo[1]){bs=bq;bm=[];break}else{if(bk===bo[2]){break}}bk=bk.previousSibling}}return{element:bs,index:bj.indexOf(bs)}}}function v(bk,bq){if(C.length||aD.length){var br,bu=[],bj=[],bl=[],bv=[],bm,bw;bq=bq||au._element;for(br=0;br<C.length;br++){var bt=C[br];if(aB(bt.options.accept)){if(bt.options.accept!==bq){continue}}else{if(typeof bt.options.accept==="string"){if(!bq[V](bt.options.accept)){continue}}}if(bq!==bt._element&&bt.dropCheck(bk,au,bq)){bu.push(bt);bj.push(bt._element)}}bm=bf(bj);bw=bm?bu[bm.index]:null;if(aD.length){for(br=0;br<aD.length;br++){var bo=aD[br],bn=ai.querySelectorAll(bo.selector);for(var bp=0,bs=bn.length;bp<bs;bp++){bo._element=bn[bp];bo.rect=bo.getRect();if(aB(bo.options.accept)){if(bo.options.accept!==bq){continue}}else{if(typeof bo.options.accept==="string"){if(!bq[V](bo.options.accept)){continue}}}if(bo._element!==bq&&bj.indexOf(bo._element)===-1&&bv.indexOf(bo._element===-1)&&bo.dropCheck(bk,au)){bl.push(bo);bv.push(bo._element)}}}if(bv.length){if(bw){bl.push(bw);bv.push(bw._element)}bm=bf(bv);if(bm){bw=bl[bm.index];if(bw.selector){bw._element=bv[bm.index]}}}}return bw?{dropzone:bw,element:bw._element}:null}}function L(bk,bq,bu,br,bv){var bp,bs,bj=(au&&au.options||aF).deltaSource,bo=bj+"X",bn=bj+"Y",by=au?au.options:aF,bt=am(au,br);br=br||au._element;if(bq==="gesture"&&!P){var bl=a5(bk);bs={x:(bl.pageX-bt.x),y:(bl.pageY-bt.y)};bp={x:(bl.clientX-bt.x),y:(bl.clientY-bt.y)}}else{bs=aE(bk);bp=F(bk);bs.x-=bt.x;bs.y-=bt.y;bp.x-=bt.x;bp.y-=bt.y;if(by.snapEnabled&&by.snap.actions.indexOf(bq)!==-1){this.snap={range:a.range,locked:a.locked,x:a.x,y:a.y,realX:a.realX,realY:a.realY,dx:a.dx,dy:a.dy};if(a.locked){bs.x+=a.dx;bs.y+=a.dy;bp.x+=a.dx;bp.y+=a.dy}}}if(au.options.restrict[bq]&&O.restricted){bs.x+=O.dx;bs.y+=O.dy;bp.x+=O.dx;bp.y+=O.dy;this.restrict={dx:O.dx,dy:O.dy}}this.pageX=bs.x;this.pageY=bs.y;this.clientX=bp.x;this.clientY=bp.y;if(bu==="start"&&!(bk instanceof L)){aY(aR,this)}this.x0=aR.pageX;this.y0=aR.pageY;this.clientX0=aR.clientX;this.clientY0=aR.clientY;this.ctrlKey=bk.ctrlKey;this.altKey=bk.altKey;this.shiftKey=bk.shiftKey;this.metaKey=bk.metaKey;this.button=bk.button;this.target=br;this.t0=Z;this.type=bq+(bu||"");if(N.active){this.detail="inertia"}if(bv){this.relatedTarget=bv}if(ap&&ap.detail==="inertia"&&!N.active&&by.inertia.zeroResumeDelta){this.dx=this.dy=0}else{if(bu==="end"||bq==="drop"){if(bj==="client"){this.dx=bp.x-aR.clientX;this.dy=bp.y-aR.clientY}else{this.dx=bs.x-aR.pageX;this.dy=bs.y-aR.pageY}}else{if(bu==="inertiastart"){this.dx=ap.dx;this.dy=ap.dy}else{if(bj==="client"){this.dx=bp.x-ap.clientX;this.dy=bp.y-ap.clientY}else{this.dx=bs.x-ap.pageX;this.dy=bs.y-ap.pageY}}}}if(bq==="resize"){if(by.squareResize||bk.shiftKey){if(ao==="y"){this.dx=this.dy}else{this.dy=this.dx}this.axes="xy"}else{this.axes=ao;if(ao==="x"){this.dy=0}else{if(ao==="y"){this.dx=0}}}}else{if(bq==="gesture"){this.touches=(P?[E[0],E[1]]:bk.touches);if(bu==="start"){this.distance=Y(bk);this.box=n(bk);this.scale=1;this.ds=0;this.angle=aV(bk);this.da=0}else{if(bu==="end"||bk instanceof L){this.distance=ap.distance;this.box=ap.box;this.scale=ap.scale;this.ds=this.scale-1;this.angle=ap.angle;this.da=this.angle-i.startAngle}else{this.distance=Y(bk);this.box=n(bk);this.scale=this.distance/i.startDistance;this.angle=aV(bk,i.prevAngle);this.ds=this.scale-i.prevScale;this.da=this.angle-i.prevAngle}}}}if(bu==="start"){this.timeStamp=Z;this.dt=0;this.duration=0;this.speed=0;this.velocityX=0;this.velocityY=0}else{if(bu==="inertiastart"){this.timeStamp=new Date().getTime();this.dt=ap.dt;this.duration=ap.duration;this.speed=ap.speed;this.velocityX=ap.velocityX;this.velocityY=ap.velocityY}else{this.timeStamp=new Date().getTime();this.dt=this.timeStamp-ap.timeStamp;this.duration=this.timeStamp-Z;var bx,bw,bm;if(bu==="end"||bk instanceof L){bm=Math.max((bu==="end"?this.duration:this.dt)/1000,0.001);bx=this[bo]-ap[bo];bw=this[bn]-ap[bn];if(this.snap&&this.snap.locked){bx-=this.snap.dx;bw-=this.snap.dy}if(this.restrict){bx-=this.restrict.dx;bw-=this.restrict.dy}if(ap.snap&&ap.snap.locked){bx-=(ap[bo]-ap.snap.dx);bw-=(ap[bn]-ap.snap.dy)}if(ap.restrict){bx+=ap.restrict.dx;bw+=ap.restrict.dy}this.speed=ab(bx,bw)/bm;this.velocityX=bx/bm;this.velocityY=bw/bm}else{this.speed=az[bj+"Speed"];this.velocityX=az[bj+"VX"];this.velocityY=az[bj+"VY"]}}}}L.prototype={preventDefault:a6,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=true},stopPropagation:function(){this.propagationStopped=true}};function aS(){this.originalEvent.preventDefault()}function b(bl,bo,bj){var bp={},bk,bn;for(bk in bl){if(bl.hasOwnProperty(bk)){bp[bk]=bl[bk]}}bp.preventDefault=aS;bp.stopPropagation=L.prototype.stopPropagation;bp.stopImmediatePropagation=L.prototype.stopImmediatePropagation;bp.timeStamp=new Date().getTime();bp.originalEvent=bl;bp.dt=bp.timeStamp-Z;bp.type="tap";var bm=bp.timeStamp-bi,bs=(a9&&a9.type!=="dubletap"&&a9.target===bp.target&&bm<500);bi=bp.timeStamp;for(bn=0;bn<bo.length;bn++){var br=am(bo[bn],bj[bn]);bp.pageX-=br.x;bp.pageY-=br.y;bp.clientX-=br.x;bp.clientY-=br.y;bp.currentTarget=bj[bn];bo[bn].fire(bp);if(bp.immediatePropagationStopped||(bp.propagationStopped&&bo[bn+1]!==bp.currentTarget)){break}}if(bs){var bq={};for(bk in bp){bq[bk]=bp[bk]}bq.dt=bm;bq.type="doubletap";for(bn=0;bn<bo.length;bn++){bq.currentTarget=bj[bn];bo[bn].fire(bq);if(bq.immediatePropagationStopped||(bq.propagationStopped&&bo[bn+1]!==bq.currentTarget)){break}}a9=bq}else{a9=bp}}function aQ(bn){if(d){if(bg||!(bn instanceof d.constructor)||d.target!==bn.target){return}}var bm=[],bk=[];var bl=bn.target;while(bl){if(aC.isSet(bl)){bm.push(aC(bl));bk.push(bl)}for(var bj in I){var bo=Element.prototype[V]===e?ai.querySelectorAll(bj):undefined;if(bl!==ai&&bl[V](bj,bo)){bm.push(I[bj]);bk.push(bl)}}bl=bl.parentNode}if(bm.length){b(bn,bm,bk)}}function ay(bm,bl){if(typeof bm!=="string"){return null}bl=bl||au;var bk=bm.indexOf("resize")!==-1?"resize":bm,bj=(bl||au).options;if(((bk==="resize"&&bj.resizable)||(bm==="drag"&&bj.draggable)||(bm==="gesture"&&bj.gesturable))&&aO[bk]){if(bm==="resize"||bm==="resizeyx"){bm="resizexy"}return bm}return null}function aq(bl){if(ax&&d&&bl.type!==d.type){if(!(/^input$|^textarea$/i.test(au._element.nodeName))){bl.preventDefault()}return}if(d&&bl.type==="mousedown"&&d.type==="touchstart"&&bl.timeStamp-d.timeStamp<300){return}var bk=(bl.target instanceof aT?bl.target.correspondingUseElement:bl.target),bn;if(P){Q(bl)}if(N.active&&au.selector){while(bk&&bk!==ai){if(bk===N.targetElement&&ay(au.getAction(bl))===ax){ah(N.i);N.active=false;if(P){Q(bl,m)}return}bk=bk.parentNode}}if(f||a0||B){return}if(u.length&&/mousedown|pointerdown/i.test(bl.type)){bn=bb(bl,u)}else{var bj,bm;while(bk&&bk!==ai&&!bn){u=[];for(bj in I){bm=Element.prototype[V]===e?ai.querySelectorAll(bj):undefined;if(bk[V](bj,bm)){I[bj]._element=bk;u.push(I[bj])}}bn=bb(bl,u);bk=bk.parentNode}}if(bn){aW=true;ax=bn;return ac(bl,bn)}else{Z=new Date().getTime();d=bl;aY(aP,bl);bg=false}}function ac(bl,bj){if(!bj&&aW&&d&&bl.type!==d.type){if(!(/^input$|^textarea$/i.test(au._element.nodeName))){bl.preventDefault()}return}aW=true;if(P){Q(bl)}if((((bl.touches&&bl.touches.length<2)||(ar&&ar.length<2))&&!au)||!ax){au=bd.get(bl.currentTarget)}var bk=au&&au.options;if(au&&!(f||a0||B)){var bm=ay(bj||au.getAction(bl));aY(aR,bl);if(P&&bl instanceof P){if(!au._gesture.target){au._gesture.target=au._element}Q(bl,au._gesture)}if(!bm){return bl}bg=false;if(bk.styleCursor){ai.documentElement.style.cursor=g[bm].cursor}ao=bm==="resizexy"?"xy":bm==="resizex"?"x":bm==="resizey"?"y":"";if(bm==="gesture"&&((bl.touches&&bl.touches.length<2)||P&&ar.length<2)){bm=null}ax=bm;a.x=null;a.y=null;Z=new Date().getTime();d=bl;aY(aP,bl);bg=false;if(!(/^input$|^textarea$/i.test(au._element.nodeName))){bl.preventDefault()}}else{if(N.active&&bl.currentTarget===N.targetElement&&au===N.target&&ay(au.getAction(bl))===ax){ah(N.i);N.active=false;if(P){if(!au._gesture.target){au._gesture.target=au._element}Q(bl,au._gesture)}}}}function an(bx,bw){var bv=au.options.snap,bt=bv.anchors,bn,br,bs,bj,bC,bq,bp,bm,by,bz;bw=bw||a;if(bw.useStatusXY){bn={x:bw.x,y:bw.y}}else{var bD=am(au);bn=aE(bx);bn.x-=bD.x;bn.y-=bD.y}bw.realX=bn.x;bw.realY=bn.y;if(bv.range<0){bv.range=Infinity}if(bv.mode==="path"){bt=[];for(by=0,bz=bv.paths.length;by<bz;by++){var bu=bv.paths[by];if(typeof bu==="function"){bu=bu(bn.x,bn.y)}bt.push({x:typeof bu.x==="number"?bu.x:bn.x,y:typeof bu.y==="number"?bu.y:bn.y,range:typeof bu.range==="number"?bu.range:bv.range})}}if((bv.mode==="anchor"||bv.mode==="path")&&bt.length){br={anchor:null,distance:0,range:0,dx:0,dy:0};for(by=0,bz=bt.length;by<bz;by++){var bo=bt[by];bs=typeof bo.range==="number"?bo.range:bv.range;bq=bo.x-bn.x;bp=bo.y-bn.y;bm=ab(bq,bp);bj=bm<bs;if(bs===Infinity&&br.inRange&&br.range!==Infinity){bj=false}if(!br.anchor||(bj?(br.inRange&&bs!==Infinity)?bm/bs<br.distance/br.range:bm<br.distance:(!br.inRange&&bm<br.distance))){if(bs===Infinity){bj=true}br.anchor=bo;br.distance=bm;br.range=bs;br.inRange=bj;br.dx=bq;br.dy=bp;bw.range=bs}}bj=br.inRange;bC=(br.anchor.x!==bw.x||br.anchor.y!==bw.y);bw.x=br.anchor.x;bw.y=br.anchor.y;bw.dx=br.dx;bw.dy=br.dy}else{if(bv.mode==="grid"){var bl=Math.round((bn.x-bv.gridOffset.x)/bv.grid.x),bk=Math.round((bn.y-bv.gridOffset.y)/bv.grid.y),bB=bl*bv.grid.x+bv.gridOffset.x,bA=bk*bv.grid.y+bv.gridOffset.y;bq=bB-bn.x;bp=bA-bn.y;bm=ab(bq,bp);bj=bm<bv.range;bC=(bB!==bw.x||bA!==bw.y);bw.x=bB;bw.y=bA;bw.dx=bq;bw.dy=bp;bw.range=bv.range}}bw.changed=(bC||(bj&&!bw.locked));bw.locked=bj;return bw}function ag(bm,bk){var bo=aC.currentAction()||ax,bj=au&&au.options.restrict[bo],bn;bk=bk||O;bn=bk.useStatusXY?bn={x:bk.x,y:bk.y}:bn=aE(bm);if(bk.snap&&bk.snap.locked){bn.x+=bk.snap.dx||0;bn.y+=bk.snap.dy||0}bk.dx=0;bk.dy=0;bk.restricted=false;if(!bo||!bj){return bk}var bl;if(bj==="parent"){bj=au._element.parentNode}else{if(bj==="self"){bj=au._element}}if(aB(bj)){bl=S(bj)}else{if(typeof bj==="function"){bj=bj(bn.x,bn.y,au._element)}bl=bj;if("x" in bj&&"y" in bj){bl={left:bj.x,top:bj.y,right:bj.x+bj.width,bottom:bj.y+bj.height}}}bk.dx=Math.max(Math.min(bl.right,bn.x),bl.left)-bn.x;bk.dy=Math.max(Math.min(bl.bottom,bn.y),bl.top)-bn.y;bk.restricted=true;return bk}function a1(bo,bn){if(!aW){return}if(!(bo instanceof L)){aY(aK,bo)}if(!bg){var bm=aK.clientX-aP.clientX,bk=aK.clientY-aP.clientY;bg=ab(bm,bk)>1}if(!ax||(bo.type==="mousemove"&&d.type==="touchstart")){return}if(bg&&(!N.active||(bo instanceof L&&/inertiastart/.test(bo.type)))){if(!(f||a0||B)){D(az,aP,aK)}if(ax&&au){var bp=au.options.restrictEnabled&&(!au.options.restrict.endOnly||bn),bj=!(f||a0||B),bl=bj?d:bo;if(bj){ap=d}if(!bp){O.restricted=false}if(au.options.snapEnabled&&au.options.snap.actions.indexOf(ax)!==-1&&(!au.options.snap.endOnly||bn)){an(bl);if((a.changed||!a.locked)||bp){if(bp){ag(bo)}g[ax].moveListener(bo)}}else{if(bp){ag(bo)}g[ax].moveListener(bo)}}}if(!(bo instanceof L)){D(az,aP,aK);aY(aP,bo)}if(f||a0){y.edgeMove(bo)}}function Q(bl,bk){if(E.length&&E[0].pointerType!==bl.pointerType){return}if(bk){bk.addPointer(bl.pointerId)}var bj=ar.indexOf(bl.pointerId);if(bj===-1){ar.push(bl.pointerId);E.push(bl)}else{E[bj]=bl}}function bh(bk){var bj=ar.indexOf(bk.pointerId);if(bj===-1){return}ar.splice(bj,1);E.splice(bj,1)}function r(bk){var bj=ar.indexOf(bk.pointerId);if(bj===-1){return}if(/move/i.test(bk.type)){E[bj]=bk}else{if(/up|cancel/i.test(bk.type)){bh(bk);if(B&&ar.length<2){au._gesture.stop()}}}}function a8(bk){bk.preventDefault();var bq,bn,br,bj,bl;if(!f){bq=new L(d,"drag","start");f=true;au.fire(bq);if(!A){ak(C);for(var bo=0;bo<aD.length;bo++){aD[bo]._elements=ai.querySelectorAll(aD[bo].selector)}}ap=bq;if(au.options.snapEnabled&&!au.options.snap.endOnly){an(bk)}}bq=new L(bk,"drag","move");var bp=au._element,bm=v(bq,bp);if(bm){bj=bm.dropzone;aN=bm.element}else{bj=aN=null}au._element=bp;if(aN!==t){if(a4){br=new L(bk,"drag","leave",t,bp);bq.dragLeave=t;bl=a4;a4=t=null}if(bj){bn=new L(bk,"drag","enter",aN,bp);bq.dragEnter=bj._element;a4=bj;t=a4._element}}au.fire(bq);if(br){bl.fire(br)}if(bn){bj.fire(bn)}ap=bq}function ad(bj){bj.preventDefault();var bk;if(!a0){bk=new L(d,"resize","start");au.fire(bk);au.fire(bk);a0=true;ap=bk;if(au.options.snapEnabled&&!au.options.snap.endOnly){an(bj)}}bk=new L(bj,"resize","move");au.fire(bk);ap=bk}function aZ(bj){if((!bj.touches||bj.touches.length<2)&&!P){return}bj.preventDefault();var bk;if(!B){bk=new L(d,"gesture","start");bk.ds=0;i.startDistance=i.prevDistance=bk.distance;i.startAngle=i.prevAngle=bk.angle;i.scale=1;B=true;au.fire(bk);ap=bk;if(au.options.snapEnabled&&!au.options.snap.endOnly){an(bj)}}bk=new L(bj,"gesture","move");bk.ds=bk.scale-i.scale;au.fire(bk);ap=bk;i.prevAngle=bk.angle;i.prevDistance=bk.distance;if(bk.scale!==Infinity&&bk.scale!==null&&bk.scale!==undefined&&!isNaN(bk.scale)){i.scale=bk.scale}}function bb(bm,bo){for(var bl=0,bj=bo.length;bl<bj;bl++){var bk=bo[bl],bn=ay(bk.getAction(bm,bk),bk);if(bn){au=bk;return bn}}}function aa(bk){if(aW||f||a0||B){return}var br=[],bq=au&&au._element,bo=(bk.target instanceof aT?bk.target.correspondingUseElement:bk.target);for(var bm in I){if(I.hasOwnProperty(bm)&&I[bm]&&bo[V](bm)){I[bm]._element=bo;br.push(I[bm])}}var bl=bd.get(bo),bj=bl&&ay(bl.getAction(bk),bl);if(bj){au=bl;u=[]}else{if(bb(bk,br)){u=br;x(bk,u);H.addToElement(bo,"mousemove",x)}else{if(au){var bp=bq.querySelectorAll("*");if(Array.prototype.indexOf.call(bp,bo)!==-1){for(var bn=0;bn<u.length;bn++){u[bn]._element=bq}x(bk,u);H.addToElement(au._element,"mousemove",x)}else{au=null;u=[]}}}}}function aw(bj){if(aW||f||a0||B){return}var bk=(bj.target instanceof aT?bj.target.correspondingUseElement:bj.target);if(!bd.get(bk)){H.removeFromElement(bk,x)}if(au&&au.options.styleCursor&&!(f||a0||B)){ai.documentElement.style.cursor=""}}function x(bj,bl){if(!(aW||f||a0||B)){var bk;if(bl){bk=bb(bj,bl)}else{if(au){bk=ay(au.getAction(bj))}}if(au&&au.options.styleCursor){if(bk){ai.documentElement.style.cursor=g[bk].cursor}else{ai.documentElement.style.cursor=""}}}else{if(ax){bj.preventDefault()}}}function at(bt){if(!(bt instanceof L||P)&&aW&&d&&!(bt instanceof d.constructor)){return}if(bt.touches&&bt.touches.length>=2){return}if(af&&(bt instanceof af)&&/inertiastart/i.test(bt.type)){bt.gestureObject.stop();return}var bp,bj=au&&au.options.inertia,bk;if(f||a0||B){if(N.active){return}var by=au.options.deltaSource,bu=az[by+"Speed"];if(au.options.inertiaEnabled&&ax!=="gesture"&&bj.actions.indexOf(ax)!==-1&&bt!==N.startEvent&&(new Date().getTime()-aK.timeStamp)<50&&bu>bj.minSpeed&&bu>bj.endSpeed){var bo=bj.resistance,bn=-Math.log(bj.endSpeed/bu)/bo,bs;N.active=true;N.target=au;N.targetElement=au._element;if(H.useAttachEvent){for(bk in bt){if(bt.hasOwnProperty(bk)){N.pointerUp[bk]=bt[bk]}}}else{N.pointerUp=bt}N.startEvent=bs=new L(bt,"drag","inertiastart");N.vx0=az[by+"VX"];N.vy0=az[by+"VY"];N.v0=bu;N.x0=ap.pageX;N.y0=ap.pageY;N.t0=N.startEvent.timeStamp/1000;N.sx=N.sy=0;N.modifiedXe=N.xe=(N.vx0-bn)/bo;N.modifiedYe=N.ye=(N.vy0-bn)/bo;N.te=bn;N.lambda_v0=bo/N.v0;N.one_ve_v0=1-bj.endSpeed/N.v0;var bz=bs.pageX,bx=bs.pageY,bA;if(bs.snap&&bs.snap.locked){bz-=bs.snap.dx;bx-=bs.snap.dy}if(bs.restrict){bz-=bs.restrict.dx;bx-=bs.restrict.dy}bA={useStatusXY:true,x:bz+N.xe,y:bx+N.ye,dx:0,dy:0,snap:null};bA.snap=bA;if(au.options.snapEnabled&&au.options.snap.endOnly){var bq=an(bt,bA);if(bq.locked){N.modifiedXe+=bq.dx;N.modifiedYe+=bq.dy}}if(au.options.restrictEnabled&&au.options.restrict.endOnly){var bm=ag(bt,bA);N.modifiedXe+=bm.dx;N.modifiedYe+=bm.dy}ah(N.i);N.i=U(al);au.fire(N.startEvent);return}if((au.options.snapEnabled&&au.options.snap.endOnly)||(au.options.restrictEnabled&&au.options.restrict.endOnly)){a1(bt,true)}}if(f){bp=new L(bt,"drag","end");var br,bv=au._element,bl=v(bp,bv);if(bl){aH=bl.dropzone;aN=bl.element}else{aH=null;aN=null}au._element=bv;if(aH){br=new L(bt,"drop",null,aN,bv);bp.dropzone=aN}else{if(a4){var bw=new L(bt,"drag","leave",aN,bv);a4.fire(bw,bv);bp.dragLeave=t}}au.fire(bp);if(br){aH.fire(br)}}else{if(a0){bp=new L(bt,"resize","end");au.fire(bp)}else{if(B){bp=new L(bt,"gesture","end");au.fire(bp)}}}aC.stop()}function J(bk,bl){var bp={},bs=ba[bk.type],bm,bn=bk.target,bo;bl=bl?true:false;for(var bj in bk){bp[bj]=bk[bj]}bp.preventDefault=function(){bk.preventDefault()};while(bn&&bn!==ai){for(bm in bs){if(bn[V](bm)){var br=bs[bm];bp.currentTarget=bn;for(bo=0;bo<br.length;bo++){if(br[bo][1]!==bl){continue}try{br[bo][0](bp)}catch(bq){W.error('Error thrown from delegated listener: "'+bm+'" '+bk.type+" "+(br[bo][0].name?br[bo][0].name:""));W.log(bq)}}}}bn=bn.parentNode}}function c(bj){return J.call(this,bj,true)}bd.indexOfElement=C.indexOfElement=function ae(bk){for(var bj=0;bj<this.length;bj++){var bl=this[bj];if(bl.selector===bk||(!bl.selector&&bl._element===bk)){return bj}}return -1};bd.get=function o(bj){if(typeof bj==="string"){return I[bj]}return this[this.indexOfElement(bj)]};C.get=function G(bj){return this[this.indexOfElement(bj)]};function q(){if(au&&!au.selector){au=null}aH=aN=a4=t=null}function aC(bj){return bd.get(bj)||new aj(bj)}function X(bj){for(var bk in aF){if(bj.hasOwnProperty(bk)&&typeof bj[bk]===typeof aF[bk]){this[bk]=bj[bk]}}}X.prototype=aF;function aj(bk,bj){this._element=bk;this._iEvents=this._iEvents||{};if(typeof bk==="string"){ai.querySelector(bk);I[bk]=this;this.selector=bk;this._gesture=m}else{if(aB(bk)){if(P){H.add(this,"pointerdown",ac);H.add(this,"pointermove",x);this._gesture=new aM();this._gesture.target=bk}else{H.add(this,"mousedown",ac);H.add(this,"mousemove",x);H.add(this,"touchstart",ac);H.add(this,"touchmove",x)}}a7.push(this)}bd.push(this);this.set(bj)}aj.prototype={setOnEvents:function(bm,br){if(bm==="drop"){var bk=br.ondrop||br.onDrop||br.drop,bo=br.ondragenter||br.onDropEnter||br.dragenter,bp=br.ondragleave||br.onDropLeave||br.dragleave;if(typeof bk==="function"){this.ondrop=bk}if(typeof bo==="function"){this.ondragenter=bo}if(typeof bp==="function"){this.ondragleave=bp}}else{var bj=br.onstart||br.onStart||br.start,bl=br.onmove||br.onMove||br.move,bn=br.onend||br.onEnd||br.end;var bq=br.oninertiastart||br.onInertiaStart||br.inertiastart;bm="on"+bm;if(typeof bj==="function"){this[bm+"start"]=bj}if(typeof bl==="function"){this[bm+"move"]=bl}if(typeof bn==="function"){this[bm+"end"]=bn}if(typeof bq==="function"){this[bm+"inertiastart"]=bq}}return this},draggable:function(bj){if(bj instanceof Object){this.options.draggable=true;this.setOnEvents("drag",bj);return this}if(typeof bj==="boolean"){this.options.draggable=bj;return this}if(bj===null){delete this.options.draggable;return this}return this.options.draggable},dropzone:function(bk){if(bk instanceof Object){this.options.dropzone=true;this.setOnEvents("drop",bk);this.accept(bk.accept);(this.selector?aD:C).push(this);if(!A&&!this.selector){this.rect=this.getRect()}return this}if(typeof bk==="boolean"){if(bk){(this.selector?aD:C).push(this);if(!A&&!this.selector){this.rect=this.getRect()}}else{var bl=this.selector?aD:C,bj=bl.indexOf(this);if(bj!==-1){bl.splice(bj,1)}}this.options.dropzone=bk;return this}if(bk===null){delete this.options.dropzone;return this}return this.options.dropzone},dropCheck:function(bo,bj,bn){var bp=aE(bo),bm=am(bj,bn),bk,bl;bp.x+=bm.x;bp.y+=bm.y;if(A){this.rect=this.getRect()}if(!this.rect){return false}bk=(bp.x>this.rect.left)&&(bp.x<this.rect.right);bl=(bp.y>this.rect.top)&&(bp.y<this.rect.bottom);return bk&&bl},dropChecker:function(bj){if(typeof bj==="function"){this.dropCheck=bj;return this}return this.dropCheck},accept:function(bj){if(aB(bj)){this.options.accept=bj;return this}if(typeof bj==="string"){ai.querySelector(bj);this.options.accept=bj;return this}if(bj===null){delete this.options.accept;return this}return this.options.accept},resizable:function(bj){if(bj instanceof Object){this.options.resizable=true;this.setOnEvents("resize",bj);return this}if(typeof bj==="boolean"){this.options.resizable=bj;return this}return this.options.resizable},resizeable:a6,squareResize:function(bj){if(typeof bj==="boolean"){this.options.squareResize=bj;return this}if(bj===null){delete this.options.squareResize;return this}return this.options.squareResize},gesturable:function(bj){if(bj instanceof Object){this.options.gesturable=true;this.setOnEvents("gesture",bj);return this}if(typeof bj==="boolean"){this.options.gesturable=bj;return this}if(bj===null){delete this.options.gesturable;return this}return this.options.gesturable},gestureable:a6,autoScroll:function(bk){var bl=aF.autoScroll;if(bk instanceof Object){var bj=this.options.autoScroll;if(bj===bl){bj=this.options.autoScroll={margin:bl.margin,distance:bl.distance,interval:bl.interval,container:bl.container}}bj.margin=this.validateSetting("autoScroll","margin",bk.margin);bj.speed=this.validateSetting("autoScroll","speed",bk.speed);bj.container=(aB(bk.container)||bk.container instanceof a3.Window?bk.container:bl.container);this.options.autoScrollEnabled=true;this.options.autoScroll=bj;return this}if(typeof bk==="boolean"){this.options.autoScrollEnabled=bk;return this}if(bk===null){delete this.options.autoScrollEnabled;delete this.options.autoScroll;return this}return(this.options.autoScrollEnabled?this.options.autoScroll:false)},snap:function(bk){var bl=aF.snap;if(bk instanceof Object){var bj=this.options.snap;if(bj===bl){bj={}}bj.mode=this.validateSetting("snap","mode",bk.mode);bj.endOnly=this.validateSetting("snap","endOnly",bk.endOnly);bj.actions=this.validateSetting("snap","actions",bk.actions);bj.range=this.validateSetting("snap","range",bk.range);bj.paths=this.validateSetting("snap","paths",bk.paths);bj.grid=this.validateSetting("snap","grid",bk.grid);bj.gridOffset=this.validateSetting("snap","gridOffset",bk.gridOffset);bj.anchors=this.validateSetting("snap","anchors",bk.anchors);this.options.snapEnabled=true;this.options.snap=bj;return this}if(typeof bk==="boolean"){this.options.snapEnabled=bk;return this}if(bk===null){delete this.options.snapEnabled;delete this.options.snap;return this}return(this.options.snapEnabled?this.options.snap:false)},inertia:function(bk){var bl=aF.inertia;if(bk instanceof Object){var bj=this.options.inertia;if(bj===bl){bj=this.options.inertia={resistance:bl.resistance,minSpeed:bl.minSpeed,endSpeed:bl.endSpeed,actions:bl.actions,zeroResumeDelta:bl.zeroResumeDelta}}bj.resistance=this.validateSetting("inertia","resistance",bk.resistance);bj.minSpeed=this.validateSetting("inertia","minSpeed",bk.minSpeed);bj.endSpeed=this.validateSetting("inertia","endSpeed",bk.endSpeed);bj.actions=this.validateSetting("inertia","actions",bk.actions);bj.zeroResumeDelta=this.validateSetting("inertia","zeroResumeDelta",bk.zeroResumeDelta);this.options.inertiaEnabled=true;this.options.inertia=bj;return this}if(typeof bk==="boolean"){this.options.inertiaEnabled=bk;return this}if(bk===null){delete this.options.inertiaEnabled;delete this.options.inertia;return this}return(this.options.inertiaEnabled?this.options.inertia:false)},getAction:function aG(bn){var bm=this.getRect(),bl,bj,bp,bo=aE(bn),bk=this.options;if(aO.resize&&bk.resizable){bl=bo.x>(bm.right-aX);bj=bo.y>(bm.bottom-aX)}ao=(bl?"x":"")+(bj?"y":"");bp=(ao)?"resize"+ao:aO.drag&&bk.draggable?"drag":null;if(aO.gesture&&((bn.touches&&bn.touches.length>=2)||(P&&ar.length>=2))&&!(f||a0)){bp="gesture"}return bp},actionChecker:function(bj){if(typeof bj==="function"){this.getAction=bj;return this}if(bj===null){delete this.options.getAction;return this}return this.getAction},getRect:function K(){if(this.selector&&!(aB(this._element))){this._element=ai.querySelector(this.selector)}return S(this._element)},rectChecker:function(bj){if(typeof bj==="function"){this.getRect=bj;return this}if(bj===null){delete this.options.getRect;return this}return this.getRect},styleCursor:function(bj){if(typeof bj==="boolean"){this.options.styleCursor=bj;return this}if(bj===null){delete this.options.styleCursor;return this}return this.options.styleCursor},origin:function(bj){if(bj instanceof Object||/^parent$|^self$/.test(bj)){this.options.origin=bj;return this}if(bj===null){delete this.options.origin;return this}return this.options.origin},deltaSource:function(bj){if(bj==="page"||bj==="client"){this.options.deltaSource=bj;return this}if(bj===null){delete this.options.deltaSource;return this}return this.options.deltaSource},restrict:function(bk){if(bk===undefined){return this.options.restrict}if(bk instanceof Object){var bj={};if(bk.drag instanceof Object||/^parent$|^self$/.test(bk.drag)){bj.drag=bk.drag}if(bk.resize instanceof Object||/^parent$|^self$/.test(bk.resize)){bj.resize=bk.resize}if(bk.gesture instanceof Object||/^parent$|^self$/.test(bk.gesture)){bj.gesture=bk.gesture}if(typeof bk.endOnly==="boolean"){bj.endOnly=bk.endOnly}this.options.restrictEnabled=true;this.options.restrict=bj}else{if(bk===null){delete this.options.restrict;delete this.options.restrictEnabled}}return this},validateSetting:function(bj,bk,bl){var bn=aF[bj],bm=this.options[bj];if(bn!==undefined&&bn[bk]!==undefined){if("objectTypes" in bn&&bn.objectTypes.test(bk)){if(bl instanceof Object){return bl}else{return(bk in bm&&bm[bk] instanceof Object?bm[bk]:bn[bk])}}if("arrayTypes" in bn&&bn.arrayTypes.test(bk)){if(bl instanceof Array){return bl}else{return(bk in bm&&bm[bk] instanceof Array?bm[bk]:bn[bk])}}if("stringTypes" in bn&&bn.stringTypes.test(bk)){if(typeof bl==="string"){return bl}else{return(bk in bm&&typeof bm[bk]==="string"?bm[bk]:bn[bk])}}if("numberTypes" in bn&&bn.numberTypes.test(bk)){if(typeof bl==="number"){return bl}else{return(bk in bm&&typeof bm[bk]==="number"?bm[bk]:bn[bk])}}if("boolTypes" in bn&&bn.boolTypes.test(bk)){if(typeof bl==="boolean"){return bl}else{return(bk in bm&&typeof bm[bk]==="boolean"?bm[bk]:bn[bk])}}if("elementTypes" in bn&&bn.elementTypes.test(bk)){if(aB(bl)){return bl}else{return(bk in bm&&aB(bm[bk])?bm[bk]:bn[bk])}}}return null},element:function(){return this._element},fire:function(bo){if(!(bo&&bo.type)||s.indexOf(bo.type)===-1){return this}var bn,bm=0,bl=0,bj,bp="on"+bo.type;while(bm<3){try{switch(bm){case R.directBind:if(bo.type in this._iEvents){bn=this._iEvents[bo.type];for(bj=bn.length;bl<bj&&!bo.immediatePropagationStopped;bl++){bn[bl](bo)}break}break;case R.onevent:if(typeof this[bp]==="function"){this[bp](bo)}break;case R.globalBind:if(bo.type in z&&(bn=z[bo.type])){for(bj=bn.length;bl<bj&&!bo.immediatePropagationStopped;bl++){bn[bl](bo)}}}if(bo.propagationStopped){break}bl=0;bm++}catch(bk){W.error("Error thrown from "+bo.type+" listener");W.error(bk);bl++;if(bm===R.onevent){bm++}}}return this},on:function(bk,bl,bj){if(bk==="wheel"){bk=p}if(s.indexOf(bk)!==-1){if(!(bk in this._iEvents)){this._iEvents[bk]=[bl]}else{if(this._iEvents[bk].indexOf(bl)===-1){this._iEvents[bk].push(bl)}}}else{if(this.selector){if(!ba[bk]){ba[bk]={}}var bm=ba[bk];if(!bm[this.selector]){bm[this.selector]=[]}bm[this.selector].push([bl,bj?true:false]);H.add(aA,bk,bj?c:J,bj)}else{H.add(this,bk,bl,bj)}}return this},off:function(bl,bn,bj){var bm,bk=-1;bj=bj?true:false;if(bl==="wheel"){bl=p}if(s.indexOf(bl)!==-1){bm=this._iEvents[bl];if(bm&&(bk=bm.indexOf(bn))!==-1){this._iEvents[bl].splice(bk,1)}}else{if(this.selector){var bo=ba[bl];if(bo&&(bm=bo[this.selector])){for(bk=0;bk<bm.length;bk++){if(bm[bk][1]===bj){break}}if(bk<bm.length){bm.splice(bk,1)}}}else{H.remove(this._element,bn,bj)}}return this},set:function(bj){if(!bj||typeof bj!=="object"){bj={}}this.options=new X(bj);this.draggable("draggable" in bj?bj.draggable:this.options.draggable);this.dropzone("dropzone" in bj?bj.dropzone:this.options.dropzone);this.resizable("resizable" in bj?bj.resizable:this.options.resizable);this.gesturable("gesturable" in bj?bj.gesturable:this.options.gesturable);if("autoScroll" in bj){this.autoScroll(bj.autoScroll)}return this},unset:function(){H.remove(this,"all");if(typeof this.selector==="string"){delete I[this.selector]}else{H.remove(this,"all");if(this.options.styleCursor){this._element.style.cursor=""}if(this._gesture){this._gesture.target=null}a7.splice(a7.indexOf(this.element()))}this.dropzone(false);bd.splice(bd.indexOf(this),1);return aC}};aj.prototype.gestureable=aj.prototype.gesturable;aj.prototype.resizeable=aj.prototype.resizable;aC.isSet=function(bj){return bd.indexOfElement(bj)!==-1};aC.on=function(bk,bl,bj){if(s.indexOf(bk)!==-1){if(!z[bk]){z[bk]=[bl]}else{if(z[bk].indexOf(bl)===-1){z[bk].push(bl)}}}else{H.add(aA,bk,bl,bj)}return aC};aC.off=function(bl,bm,bj){if(s.indexOf(bl)===-1){H.remove(aA,bl,bm,bj)}else{var bk;if(bl in z&&(bk=z[bl].indexOf(bm))!==-1){z[bl].splice(bk,1)}}return aC};aC.simulate=function(bm,bj,bk){var bl={},bo,bn;if(bm==="resize"){bm="resizexy"}if(!(bm in g)){return aC}if(bk){for(bo in bk){if(bk.hasOwnProperty(bo)){bl[bo]=bk[bo]}}}else{bn=(au._element instanceof h)?bj.getBoundingClientRect():bn=bj.getClientRects()[0];if(bm==="drag"){bl.pageX=bn.left+bn.width/2;bl.pageY=bn.top+bn.height/2}else{bl.pageX=bn.right;bl.pageY=bn.bottom}}bl.target=bl.currentTarget=bj;bl.preventDefault=bl.stopPropagation=a6;ac(bl,bm);return aC};aC.enableDragging=function(bj){if(bj!==null&&bj!==undefined){aO.drag=bj;return aC}return aO.drag};aC.enableResizing=function(bj){if(bj!==null&&bj!==undefined){aO.resize=bj;return aC}return aO.resize};aC.enableGesturing=function(bj){if(bj!==null&&bj!==undefined){aO.gesture=bj;return aC}return aO.gesture};aC.eventTypes=s;aC.debug=function(){return{target:au,dragging:f,resizing:a0,gesturing:B,prepared:ax,prevCoords:aP,downCoords:aR,pointerIds:ar,pointerMoves:E,addPointer:Q,removePointer:bh,recordPointers:r,inertia:N,downTime:Z,downEvent:d,prevEvent:ap,Interactable:aj,IOptions:X,interactables:bd,dropzones:C,pointerIsDown:aW,defaultOptions:aF,actions:g,dragMove:a8,resizeMove:ad,gestureMove:aZ,pointerUp:at,pointerDown:ac,pointerMove:a1,pointerHover:x,events:H,globalEvents:z,delegatedEvents:ba}};aC.getTouchAverage=a5;aC.getTouchBBox=n;aC.getTouchDistance=Y;aC.getTouchAngle=aV;aC.getElementRect=S;aC.margin=function(bj){if(typeof bj==="number"){aX=bj;return aC}return aX};aC.styleCursor=function(bj){if(typeof bj==="boolean"){aF.styleCursor=bj;return aC}return aF.styleCursor};aC.autoScroll=function(bj){var bk=aF.autoScroll;if(bj instanceof Object){aF.autoScrollEnabled=true;if(typeof(bj.margin)==="number"){bk.margin=bj.margin}if(typeof(bj.speed)==="number"){bk.speed=bj.speed}bk.container=(aB(bj.container)||bj.container instanceof a3.Window?bj.container:bk.container);return aC}if(typeof bj==="boolean"){aF.autoScrollEnabled=bj;return aC}return aF.autoScrollEnabled?bk:false};aC.snap=function(bk){var bj=aF.snap;if(bk instanceof Object){aF.snapEnabled=true;if(typeof bk.mode==="string"){bj.mode=bk.mode}if(typeof bk.endOnly==="boolean"){bj.endOnly=bk.endOnly}if(typeof bk.range==="number"){bj.range=bk.range}if(bk.actions instanceof Array){bj.actions=bk.actions}if(bk.anchors instanceof Array){bj.anchors=bk.anchors}if(bk.grid instanceof Object){bj.grid=bk.grid}if(bk.gridOffset instanceof Object){bj.gridOffset=bk.gridOffset}return aC}if(typeof bk==="boolean"){aF.snapEnabled=bk;return aC}return{enabled:aF.snapEnabled,mode:bj.mode,actions:bj.actions,grid:bj.grid,gridOffset:bj.gridOffset,anchors:bj.anchors,paths:bj.paths,range:bj.range,locked:a.locked,x:a.x,y:a.y,realX:a.realX,realY:a.realY,dx:a.dx,dy:a.dy}};aC.inertia=function(bk){var bj=aF.inertia;if(bk instanceof Object){aF.inertiaEnabled=true;if(typeof bk.resistance==="number"){bj.resistance=bk.resistance}if(typeof bk.minSpeed==="number"){bj.minSpeed=bk.minSpeed}if(typeof bk.endSpeed==="number"){bj.endSpeed=bk.endSpeed}if(typeof bk.zeroResumeDelta==="boolean"){bj.zeroResumeDelta=bk.zeroResumeDelta}if(bk.actions instanceof Array){bj.actions=bk.actions}return aC}if(typeof bk==="boolean"){aF.inertiaEnabled=bk;return aC}return{enabled:aF.inertiaEnabled,resistance:bj.resistance,minSpeed:bj.minSpeed,endSpeed:bj.endSpeed,actions:bj.actions,zeroResumeDelta:bj.zeroResumeDelta}};aC.supportsTouch=function(){return M};aC.currentAction=function(){return(f&&"drag")||(a0&&"resize")||(B&&"gesture")||null};aC.stop=function(bk){if(f||a0||B){y.stop();u=[];if(au.options.styleCursor){ai.documentElement.style.cursor=""}if(au._gesture){au._gesture.stop()}q();for(var bj=0;bj<aD.length;bj++){aD._elements=[]}if(bk&&typeof bk.preventDefault==="function"){bk.preventDefault()}}if(ar&&ar.length){ar.splice(0);E.splice(0)}aW=a.locked=f=a0=B=false;ax=ap=null;return aC};aC.dynamicDrop=function(bj){if(typeof bj==="boolean"){if(f&&A!==bj&&!bj){ak(C)}A=bj;return aC}return A};aC.deltaSource=function(bj){if(bj==="page"||bj==="client"){aF.deltaSource=bj;return this}return aF.deltaSource};aC.restrict=function(bk){var bj=aF.restrict;if(bk===undefined){return aF.restrict}if(bk instanceof Object){if(bk.drag instanceof Object||/^parent$|^self$/.test(bk.drag)){bj.drag=bk.drag}if(bk.resize instanceof Object||/^parent$|^self$/.test(bk.resize)){bj.resize=bk.resize}if(bk.gesture instanceof Object||/^parent$|^self$/.test(bk.gesture)){bj.gesture=bk.gesture}if(typeof bk.endOnly==="boolean"){bj.endOnly=bk.endOnly}}else{if(bk===null){bj.drag=bj.resize=bj.gesture=null;bj.endOnly=false}}return this};if(P){H.add(aA,"pointerup",aQ);H.add(aA,"pointerdown",aq);H.add(aA,"MSGestureChange",a1);H.add(aA,"MSGestureEnd",at);H.add(aA,"MSInertiaStart",at);H.add(aA,"pointerover",aa);H.add(aA,"pointerout",aw);H.add(aA,"pointermove",r);H.add(aA,"pointerup",r);H.add(aA,"pointercancel",r);H.add(aA,"pointerup",function(){if(!(f||a0||B)){aW=false}});m=new aM();m.target=ai.documentElement}else{H.add(aA,"mouseup",aQ);H.add(aA,"touchend",aQ);H.add(aA,"mousedown",aq);H.add(aA,"mousemove",a1);H.add(aA,"mouseup",at);H.add(aA,"mouseover",aa);H.add(aA,"mouseout",aw);H.add(aA,"touchstart",aq);H.add(aA,"touchmove",a1);H.add(aA,"touchend",at);H.add(aA,"touchcancel",at)}H.add(l,"blur",at);try{if(a3.frameElement){aI._element=a3.frameElement.ownerDocument;H.add(aI,"mouseup",at);H.add(aI,"touchend",at);H.add(aI,"touchcancel",at);H.add(aI,"pointerup",at);H.add(av,"blur",at)}}catch(aL){aC.windowParentError=aL}H.add(aA,"selectstart",function(bj){if(f||a0||B){bj.preventDefault()}});if(!(V in Element.prototype)||typeof(Element.prototype[V])!=="function"){Element.prototype[V]=e=function(bj,bk){bk=bk||this.parentNode.querySelectorAll(bj);var bm=bk.length;for(var bl=0;bl<bm;bl++){if(bk[bl]===this){return true}}return false}}(function(){var bk=0,bl=["ms","moz","webkit","o"];for(var bj=0;bj<bl.length&&!a3.requestAnimationFrame;++bj){U=a3[bl[bj]+"RequestAnimationFrame"];ah=a3[bl[bj]+"CancelAnimationFrame"]||a3[bl[bj]+"CancelRequestAnimationFrame"]}if(!U){U=function(bp){var bm=new Date().getTime(),bn=Math.max(0,16-(bm-bk)),bo=a3.setTimeout(function(){bp(bm+bn)},bn);bk=bm+bn;return bo}}if(!ah){ah=function(bm){clearTimeout(bm)}}}());if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=aC}exports.interact=aC}else{a3.interact=aC}}(this));